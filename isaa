#!/bin/bash

# Update system
sudo apt-get update && sudo apt-get upgrade -y

# Install necessary packages (ensure curl is installed)
sudo apt-get install curl -y

# Add Security Onion repository
curl -fsSL https://github.com/Security-Onion-Solutions/security-onion/blob/main/README.md | sudo tee /etc/apt/sources.list.d/securityonion.list

# Download and install the Security Onion setup
sudo apt-get install securityonion-setup -y

# Run the setup tool
sudo so-setup

# Configure Security Onion
echo "Configuring Security Onion environment..."
sudo so-setup --sensor # For sensor-only installation
# sudo so-setup --standalone # Uncomment for a standalone deployment with Elastic Stack

# Once the setup finishes, make sure services are up and running
sudo so-status
